"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["786053"],{226228:function(e,n,s){s.r(n),s.d(n,{default:()=>h,frontMatter:()=>l,metadata:()=>t,assets:()=>o,toc:()=>d,contentTitle:()=>c});var t=JSON.parse('{"id":"query/query-data/select","title":"Select Manual","description":"\x3c!--","source":"@site/versioned_docs/version-2.0/query/query-data/select.md","sourceDirName":"query/query-data","slug":"/query/query-data/select","permalink":"/docs/2.0/query/query-data/select","draft":false,"unlisted":false,"tags":[],"version":"2.0","frontMatter":{"title":"Select Manual","language":"en"},"sidebar":"docs","previous":{"title":"MySQL Compatibility","permalink":"/docs/2.0/query/query-data/mysql-compatibility"},"next":{"title":"Complex Type","permalink":"/docs/2.0/query/query-data/complex-type"}}'),r=s("785893"),i=s("250065");let l={title:"Select Manual",language:"en"},c=void 0,o={},d=[{value:"Select",id:"select",level:2},{value:"Syntax explanation",id:"syntax-explanation",level:2},{value:"Syntax constraints",id:"syntax-constraints",level:2},{value:"Join syntax",id:"join-syntax",level:2},{value:"Example",id:"example",level:2},{value:"Best practice",id:"best-practice",level:2}];function a(e){let n={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"select",children:"Select"}),"\n",(0,r.jsx)(n.p,{children:"Select syntax"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"SELECT\n    [hint_statement, ...]\n    [ALL | DISTINCT | DISTINCTROW | ALL EXCEPT ( col_name1 [, col_name2, col_name3, ...] )]\n    select_expr [, select_expr ...]\n    [FROM table_references\n      [PARTITION partition_list]\n      [TABLET tabletid_list]\n      [TABLESAMPLE sample_value [ROWS | PERCENT]\n        [REPEATABLE pos_seek]]\n    [WHERE where_condition]\n    [GROUP BY [GROUPING SETS | ROLLUP | CUBE] {col_name | expr | position}]\n    [HAVING where_condition]\n    [ORDER BY {col_name | expr | position}\n      [ASC | DESC], ...]\n    [LIMIT {[offset,] row_count | row_count OFFSET offset}]\n    [INTO OUTFILE 'file_name']\n"})}),"\n",(0,r.jsx)(n.h2,{id:"syntax-explanation",children:"Syntax explanation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"select_expr, ..."}),"Specifies the columns to retrieve and display in the result set. Aliases can be used, and ",(0,r.jsx)(n.code,{children:"as"})," is optional."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"table_references"}),"Specifies the target tables for retrieval, which can be one or more tables (including temporary tables generated by subqueries)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"where_definition"}),"Specifies the retrieval conditions (expressions). If a WHERE clause exists, its conditions filter the row data. The ",(0,r.jsx)(n.code,{children:"where_condition"})," is an expression that evaluates to true for each row to be selected. If there is no WHERE clause, the statement selects all rows. In a WHERE expression, you can use any MySQL-supported functions and operators except aggregate functions."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ALL | DISTINCT"}),"Filters the result set. ",(0,r.jsx)(n.code,{children:"ALL"})," selects all rows, while ",(0,r.jsx)(n.code,{children:"DISTINCT"})," or ",(0,r.jsx)(n.code,{children:"DISTINCTROW"})," filters out duplicate rows. The default is ",(0,r.jsx)(n.code,{children:"ALL"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ALL EXCEPT"}),"Filters the result set from ",(0,r.jsx)(n.code,{children:"ALL"})," by specifying one or more column names to exclude from the full result set. All matching column names will be ignored in the output."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"INTO OUTFILE 'file_name'"}),"Saves the result set to a new file (which must not exist beforehand), with differences in the saved format."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Group by having"}),"Groups the result set by one or more columns. If ",(0,r.jsx)(n.code,{children:"HAVING"})," is present, it filters the groups produced by ",(0,r.jsx)(n.code,{children:"GROUP BY"}),". Extensions to ",(0,r.jsx)(n.code,{children:"GROUP BY"})," such as ",(0,r.jsx)(n.code,{children:"GROUPING SETS"}),", ",(0,r.jsx)(n.code,{children:"ROLLUP"}),", and ",(0,r.jsx)(n.code,{children:"CUBE"})," are available and detailed in the ",(0,r.jsx)(n.a,{href:"https://doris.apache.org/community/design/grouping_sets_design",children:"GROUPING SETS"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Order by"}),"Sorts the final result set. ",(0,r.jsx)(n.code,{children:"ORDER BY"})," sorts the result set by comparing values in one or more columns. Sorting operations can be time-consuming and resource-intensive because all data needs to be sent to a single node for sorting. Sorting requires more memory compared to non-sorted operations. If you need to return the top N sorted results, use the ",(0,r.jsx)(n.code,{children:"LIMIT"})," clause."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Limit n"}),"Limits the number of rows in the output result set. ",(0,r.jsx)(n.code,{children:"LIMIT m,n"})," means to start outputting from the mth row and return n records. Using ",(0,r.jsx)(n.code,{children:"LIMIT m,n"})," is meaningful only when combined with ",(0,r.jsx)(n.code,{children:"ORDER BY"}),", otherwise the data returned may be inconsistent each time the query is executed."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Having"}),"The ",(0,r.jsx)(n.code,{children:"HAVING"})," clause does not filter rows in the table but filters the results produced by aggregate functions. Typically, ",(0,r.jsx)(n.code,{children:"HAVING"})," is used with aggregate functions (such as ",(0,r.jsx)(n.code,{children:"COUNT()"}),", ",(0,r.jsx)(n.code,{children:"SUM()"}),", ",(0,r.jsx)(n.code,{children:"AVG()"}),", ",(0,r.jsx)(n.code,{children:"MIN()"}),", ",(0,r.jsx)(n.code,{children:"MAX()"}),") and the ",(0,r.jsx)(n.code,{children:"GROUP BY"})," clause."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"SELECT"})," supports explicit partition selection using ",(0,r.jsx)(n.code,{children:"PARTITION"}),", which includes a list of partitions or subpartitions (or both) following the table name in ",(0,r.jsx)(n.code,{children:"table_reference"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"[TABLET tids] TABLESAMPLE n [ROWS | PERCENT] [REPEATABLE seek]"}),"Limits the number of rows read from a table in the ",(0,r.jsx)(n.code,{children:"FROM"})," clause by pseudo-randomly selecting several tablets based on the specified number of rows or percentage. ",(0,r.jsx)(n.code,{children:"REPEATABLE"})," with a specified seed allows the same sample to be returned again. Alternatively, Tablet IDs can be manually specified, but this is only applicable to OLAP tables."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"hint_statement"}),"Using hints before the select list can influence the optimizer's behavior to obtain a desired execution plan. For more information, refer to the ",(0,r.jsx)(n.a,{href:"../join-optimization/join-hint",children:"joinHint Document"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"syntax-constraints",children:"Syntax constraints"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"SELECT"})," can also be used to retrieve calculated rows without referencing any tables."]}),"\n",(0,r.jsxs)(n.li,{children:["All clauses must strictly follow the above format. A ",(0,r.jsx)(n.code,{children:"HAVING"})," clause must come after the ",(0,r.jsx)(n.code,{children:"GROUP BY"})," clause and before the ",(0,r.jsx)(n.code,{children:"ORDER BY"})," clause."]}),"\n",(0,r.jsxs)(n.li,{children:["The alias keyword ",(0,r.jsx)(n.code,{children:"AS"})," is optional. Aliases can be used in ",(0,r.jsx)(n.code,{children:"GROUP BY"}),", ",(0,r.jsx)(n.code,{children:"ORDER BY,"})," and ",(0,r.jsx)(n.code,{children:"HAVING"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"WHERE"})," clause: Executes the ",(0,r.jsx)(n.code,{children:"WHERE"})," statement to determine which rows should be included in the ",(0,r.jsx)(n.code,{children:"GROUP BY"})," section, while ",(0,r.jsx)(n.code,{children:"HAVING"})," is used to determine which rows from the result set should be used."]}),"\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.code,{children:"HAVING"})," clause can reference aggregate functions, such as ",(0,r.jsx)(n.code,{children:"count, sum, max, min, avg"}),", while the ",(0,r.jsx)(n.code,{children:"WHERE"})," clause cannot. However, the ",(0,r.jsx)(n.code,{children:"WHERE"})," clause can reference other functions besides aggregate functions. Column aliases cannot be used in the ",(0,r.jsx)(n.code,{children:"WHERE"})," clause to define conditions."]}),"\n",(0,r.jsxs)(n.li,{children:["Following ",(0,r.jsx)(n.code,{children:"GROUP BY"})," with ",(0,r.jsx)(n.code,{children:"WITH ROLLUP"})," allows for one or more aggregations of the results."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"join-syntax",children:"Join syntax"}),"\n",(0,r.jsx)(n.p,{children:"Doris supports the following JOIN syntax."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"JOIN\ntable_references:\n    table_reference [, table_reference] \u2026\ntable_reference:\n    table_factor\n  | join_table\ntable_factor:\n    tbl_name [[AS] alias]\n        [{USE|IGNORE|FORCE} INDEX (key_list)]\n  | ( table_references )\n  | { OJ table_reference LEFT OUTER JOIN table_reference\n        ON conditional_expr }\njoin_table:\n    table_reference [INNER | CROSS] JOIN table_factor [join_condition]\n  | table_reference LEFT [OUTER] JOIN table_reference join_condition\n  | table_reference NATURAL [LEFT [OUTER]] JOIN table_factor\n  | table_reference RIGHT [OUTER] JOIN table_reference join_condition\n  | table_reference NATURAL [RIGHT [OUTER]] JOIN table_factor\njoin_condition:\n    ON conditional_expr\n"})}),"\n",(0,r.jsx)(n.p,{children:"UNION:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"SELECT ...\nUNION [ALL| DISTINCT] SELECT ......\n[UNION [ALL| DISTINCT] SELECT ...]\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"UNION"})," is used to combine the results of multiple ",(0,r.jsx)(n.code,{children:"SELECT"})," statements into a single result set. The column names from the first ",(0,r.jsx)(n.code,{children:"SELECT"})," statement are used as the column names for the returned result. The selected columns listed in the corresponding positions of each ",(0,r.jsx)(n.code,{children:"SELECT"})," statement should have the same data type. (For example, the first column selected in the first statement should have the same type as the first column selected in the other statements.)"]}),"\n",(0,r.jsxs)(n.p,{children:["By default, ",(0,r.jsx)(n.code,{children:"UNION"})," removes duplicate rows from the result. The optional ",(0,r.jsx)(n.code,{children:"DISTINCT"})," keyword has no effect beyond the default, as it also specifies duplicate row removal. Using the optional ",(0,r.jsx)(n.code,{children:"ALL"})," keyword, no duplicate row removal occurs, and the result includes all matching rows from all ",(0,r.jsx)(n.code,{children:"SELECT"})," statements."]}),"\n",(0,r.jsx)(n.p,{children:"INTERSECT:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT ...\nINTERSECT [DISTINCT] SELECT ......\n[INTERSECT [DISTINCT] SELECT ...]\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"INTERSECT"})," is used to return the intersection of results from multiple ",(0,r.jsx)(n.code,{children:"SELECT"})," statements, with duplicate results removed.\nThe effect of ",(0,r.jsx)(n.code,{children:"INTERSECT"})," is equivalent to ",(0,r.jsx)(n.code,{children:"INTERSECT DISTINCT"}),". The ",(0,r.jsx)(n.code,{children:"ALL"})," keyword is not supported.\nEach ",(0,r.jsx)(n.code,{children:"SELECT"})," query must return the same number of columns, And when the column types are inconsistent, they will be ",(0,r.jsx)(n.code,{children:"CAST"})," to the same type."]}),"\n",(0,r.jsx)(n.p,{children:"EXCEPT/MINUS:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT ...\nEXCEPT [DISTINCT] SELECT ......\n[EXCEPT [DISTINCT] SELECT ...]\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"EXCEPT"})," clause is used to return the complement between the results of multiple queries, meaning it returns the data from the left query that does not exist in the right query, with duplicates removed.\n",(0,r.jsx)(n.code,{children:"EXCEPT"})," is functionally equivalent to ",(0,r.jsx)(n.code,{children:"MINUS"}),".\nThe effect of ",(0,r.jsx)(n.code,{children:"EXCEPT"})," is the same as ",(0,r.jsx)(n.code,{children:"EXCEPT DISTINCT"}),". The ",(0,r.jsx)(n.code,{children:"ALL"})," keyword is not supported.\nEach ",(0,r.jsx)(n.code,{children:"SELECT"})," query must return the same number of columns, And when the column types are inconsistent, they will be ",(0,r.jsx)(n.code,{children:"CAST"})," to the same type."]}),"\n",(0,r.jsx)(n.p,{children:"WITH:"}),"\n",(0,r.jsxs)(n.p,{children:["To specify a common table expression, use a ",(0,r.jsx)(n.code,{children:"WITH"})," clause with one or more comma-separated subclauses. Each subclause provides a subquery that generates a result set and associates a name with the subquery. The following example defines CTEs named ",(0,r.jsx)(n.code,{children:"cte1"})," and ",(0,r.jsx)(n.code,{children:"cte2"})," in the ",(0,r.jsx)(n.code,{children:"WITH"})," clause, and refers to them in the top-level ",(0,r.jsx)(n.code,{children:"SELECT "}),"following the WITH clause."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"WITH\n  cte1 AS (SELECT a\uFF0Cb FROM table1),\n  cte2 AS (SELECT c\uFF0Cd FROM table2)\nSELECT b\uFF0Cd FROM cte1 JOIN cte2\nWHERE cte1.a = cte2.c;\n"})}),"\n",(0,r.jsxs)(n.p,{children:["In statements that include this ",(0,r.jsx)(n.code,{children:"WITH"})," clause, each CTE name can be referenced to access the corresponding CTE result set. CTE names can be referenced in other CTEs, allowing CTEs to be defined based on other CTEs. Currently, recursive CTEs are not supported."]}),"\n",(0,r.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Query the names of students whose ages are 18, 20, and 25."}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"select Name from student where age in (18,20,25);\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"ALL EXCEPT"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"-- Query all information except for the age of the students.\nselect * except(age) from student; \n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"GROUP BY"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"--Query the tb_book table, group by type, and calculate the average price for each category of books.\nselect type,avg(price) from tb_book group by type;\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"DISTINCT"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"--Query the tb_book table and remove duplicate type data.\nselect distinct type from tb_book;\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"ORDER BY"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Sort the query results in ascending order (by default) or descending order (DESC). In ascending order, NULL values should appear at the beginning, and in descending order, NULL values should appear at the end."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"--Query all records from the tb_book table, sort them in descending order by id, and display only the first three records.\nselect * from tb_book order by id desc limit 3;\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"LIKE"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"LIKE"})," can perform fuzzy queries with two wildcards: ",(0,r.jsx)(n.code,{children:"%"})," and ",(0,r.jsx)(n.code,{children:"_"}),". The ",(0,r.jsx)(n.code,{children:"%"})," wildcard matches one or more characters, while the ",(0,r.jsx)(n.code,{children:"_"})," wildcard matches a single character."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"-- Find all books where the second character is 'h'.\nselect * from tb_book where name like('_h%');\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"LIMIT (Limit the number of result rows.)"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"-- Display 3 records in descending order.\nselect * from tb_book order by price desc limit 3;\n\nDisplay 4 records starting from id=1\nselect * from tb_book where id limit 1,4;\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"CONCAT (Concatenate multiple columns"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"--Concatenate 'name' and 'price' into a new string for output.\nselect id,concat(name,\":\",price) as info,type from tb_book;\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Functions and expressions"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'--Calculate the total price of each category of books in the tb_book table.\nselect sum(price) as total,type from tb_book group by type;\n--20% off the price\nselect *,(price * 0.8) as "20% off" from tb_book;\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"UNION"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"SELECT a FROM t1 WHERE a = 10 AND B = 1 ORDER by a LIMIT 10\nUNION\nSELECT a FROM t2 WHERE a = 11 AND B = 2 ORDER by a LIMIT 10;\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"INTERSECT"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT a FROM t1 WHERE a = 10 AND B = 1 ORDER by a LIMIT 10\nINTERSECT\nSELECT a FROM t2 WHERE a = 11 AND B = 2 ORDER by a LIMIT 10;\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"EXCEPT"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT a FROM t1 WHERE a = 10 AND B = 1 ORDER by a LIMIT 10\nEXCEPT\nSELECT a FROM t2 WHERE a = 11 AND B = 2 ORDER by a LIMIT 10;\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"WITH clause"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"WITH cte AS\n(\n  SELECT 1 AS col1, 2 AS col2\n  UNION ALL\n  SELECT 3, 4\n)\nSELECT col1, col2 FROM cte;\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"JOIN"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"SELECT * FROM t1 LEFT JOIN (t2, t3, t4)\n                 ON (t2.a = t1.a AND t3.b = t1.b AND t4.c = t1.c)\n"})}),"\n",(0,r.jsx)(n.p,{children:"the same as"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"SELECT * FROM t1 LEFT JOIN (t2 CROSS JOIN t3 CROSS JOIN t4)\n                 ON (t2.a = t1.a AND t3.b = t1.b AND t4.c = t1.c)\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"INNER JOIN"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"SELECT t1.name, t2.salary\n  FROM employee AS t1 INNER JOIN info AS t2 ON t1.name = t2.name;\n\nSELECT t1.name, t2.salary\n  FROM employee t1 INNER JOIN info t2 ON t1.name = t2.name;\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"LEFT JOIN"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"SELECT left_tbl.*\n  FROM left_tbl LEFT JOIN right_tbl ON left_tbl.id = right_tbl.id\n  WHERE right_tbl.id IS NULL;\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"RIGHT JOIN"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"mysql SELECT * FROM t1 RIGHT JOIN t2 ON (t1.a = t2.a);\n+------+------+------+------+\n| a    | b    | a    | c    |\n+------+------+------+------+\n|    2 | y    |    2 | z    |\n| NULL | NULL |    3 | w    |\n+------+------+------+------+\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"TABLESAMPLE"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"--Randomly sample 1000 rows in t1 using pseudo-random method. Note that the actual process is to select several Tablets based on the statistical information of the table, and the total number of rows in the selected Tablets may be greater than 1000. Therefore, if you want to return exactly 1000 rows, you need to add a Limit clause.\nSELECT * FROM t1 TABLET(10001) TABLESAMPLE(1000 ROWS) REPEATABLE 2 limit 1000;\n"})}),"\n",(0,r.jsx)(n.h2,{id:"best-practice",children:"Best practice"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Additional explanation about the SELECT clause:\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["An alias can be specified for ",(0,r.jsx)(n.code,{children:"select_expr"})," using ",(0,r.jsx)(n.code,{children:"AS alias_name"}),". The alias serves as the column name for the expression and can be used in ",(0,r.jsx)(n.code,{children:"GROUP BY"}),", ",(0,r.jsx)(n.code,{children:"ORDER BY"}),", or ",(0,r.jsx)(n.code,{children:"HAVING"})," clauses."]}),"\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.code,{children:"table_references"})," after ",(0,r.jsx)(n.code,{children:"FROM"})," indicate one or multiple tables involved in the query. If multiple tables are listed, a ",(0,r.jsx)(n.code,{children:"JOIN"})," operation will be performed. Each specified table can be assigned an alias."]}),"\n",(0,r.jsxs)(n.li,{children:["The selected columns after ",(0,r.jsx)(n.code,{children:"SELECT"})," can be referenced in ",(0,r.jsx)(n.code,{children:"ORDER BY"})," and ",(0,r.jsx)(n.code,{children:"GROUP BY"})," clauses using column names, column aliases, or integers representing the column position (starting from 1)."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"SELECT college, region, seed FROM tournament\n  ORDER BY region, seed;\n\nSELECT college, region AS r, seed AS s FROM tournament\n  ORDER BY r, s;\n\nSELECT college, region, seed FROM tournament\n  ORDER BY 2, 3;\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["If ",(0,r.jsx)(n.code,{children:"ORDER BY"})," appears in a subquery and is also applied to the outer query, the outermost ",(0,r.jsx)(n.code,{children:"ORDER BY"})," takes precedence."]}),"\n",(0,r.jsxs)(n.li,{children:["When using ",(0,r.jsx)(n.code,{children:"GROUP BY"}),", the grouped columns are automatically sorted in ascending order (as if an ",(0,r.jsx)(n.code,{children:"ORDER BY"})," clause followed with the same columns). To avoid the overhead caused by the automatic sorting of ",(0,r.jsx)(n.code,{children:"GROUP BY"}),", adding ",(0,r.jsx)(n.code,{children:"ORDER BY NULL"})," can solve the issue:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"SELECT a, COUNT(b) FROM test_table GROUP BY a ORDER BY NULL;\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["When sorting columns in a ",(0,r.jsx)(n.code,{children:"SELECT"})," statement using ",(0,r.jsx)(n.code,{children:"ORDER BY"})," or ",(0,r.jsx)(n.code,{children:"GROUP BY"}),", the server only sorts the values using the initial number of bytes indicated by the ",(0,r.jsx)(n.code,{children:"max_sort_length"})," system variable."]}),"\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.code,{children:"HAVING"})," clause is typically applied at the end, just before the result set is returned to the client, and it is not optimized (whereas ",(0,r.jsx)(n.code,{children:"LIMIT"})," is applied after ",(0,r.jsx)(n.code,{children:"HAVING"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["According to the SQL standard, ",(0,r.jsx)(n.code,{children:"HAVING"})," must reference columns that are either in the ",(0,r.jsx)(n.code,{children:"GROUP BY"})," list or used in aggregate functions. However, MySQL extends this by allowing ",(0,r.jsx)(n.code,{children:"HAVING"})," to reference columns from the ",(0,r.jsx)(n.code,{children:"SELECT"})," clause list and columns from outer subqueries."]}),"\n",(0,r.jsxs)(n.li,{children:["If a column referenced in ",(0,r.jsx)(n.code,{children:"HAVING"})," is ambiguous, a warning will be generated. In the following statement, ",(0,r.jsx)(n.code,{children:"col2"})," is ambiguous:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"SELECT COUNT(col1) AS col2 FROM t GROUP BY col2 HAVING col2 = 2;\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Do not use ",(0,r.jsx)(n.code,{children:"HAVING"})," where ",(0,r.jsx)(n.code,{children:"WHERE"})," should be used. ",(0,r.jsx)(n.code,{children:"HAVING"})," is intended to be used with ",(0,r.jsx)(n.code,{children:"GROUP BY"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"HAVING"})," clause can reference aggregate functions, whereas ",(0,r.jsx)(n.code,{children:"WHERE"})," cannot."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"SELECT user, MAX(salary) FROM users\n  GROUP BY user HAVING MAX(salary)  10;\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.code,{children:"LIMIT"})," clause can be used to restrict the number of rows returned by a ",(0,r.jsx)(n.code,{children:"SELECT"})," statement. ",(0,r.jsx)(n.code,{children:"LIMIT"})," can have one or two parameters, both of which must be non-negative integers."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"-- Retrieve rows 6 to 15 from the result set.\nSELECT * FROM tbl LIMIT 5,10;\n-- If you want to retrieve all rows starting from a certain offset, you can set a very large constant as the second parameter. The following query retrieves all data starting from the 96th row:\nSELECT * FROM tbl LIMIT 95,18446744073709551615;\n-- If LIMIT has only one parameter, then the parameter specifies the number of rows that should be retrieved, and the offset is defaulted to 0, which means starting from the first row.\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"SELECT...INTO"})," allows the query results to be written to a file."]}),"\n",(0,r.jsxs)(n.li,{children:["Modifiers for the ",(0,r.jsx)(n.code,{children:"SELECT"})," keyword:\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Primarily used for removing duplicates."}),"\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.code,{children:"ALL"})," and ",(0,r.jsx)(n.code,{children:"DISTINCT"})," modifiers specify whether to remove duplicate rows (not a specific column) from the result set."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ALL"})," is the default modifier, meaning all rows that meet the criteria will be retrieved."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"DISTINCT "}),"removes duplicate rows."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Key advantages of subqueries:\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Subqueries enable structured queries, allowing each part of a statement to be isolated."}),"\n",(0,r.jsx)(n.li,{children:"Some operations require complex joins and associations. Subqueries provide alternative methods to perform these operations."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Accelerating queries:\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Utilize Doris's partitioning and bucketing as data filtering conditions to reduce the data scanning range as much as possible."}),"\n",(0,r.jsx)(n.li,{children:"Make full use of Doris's prefix index fields as data filtering conditions to speed up query performance."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["UNION:Using only the ",(0,r.jsx)(n.code,{children:"union"})," keyword has the same effect as using ",(0,r.jsx)(n.code,{children:"union distinct"}),". Since deduplication can be memory-intensive, using ",(0,r.jsx)(n.code,{children:"union all"})," for queries can result in faster performance and reduced memory consumption. If users want to perform ",(0,r.jsx)(n.code,{children:"order by"})," and ",(0,r.jsx)(n.code,{children:"limit"})," operations on the returned result set, they should place the ",(0,r.jsx)(n.code,{children:"union"})," operation within a subquery, then select from that subquery, and finally, place the subquery along with ",(0,r.jsx)(n.code,{children:"order by"})," outside."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"select * from (select age from student_01 union all select age from student_02) as t1 \norder by age limit 4;\n\n+-------------+\n|     age     |\n+-------------+\n|      18     |\n|      19     |\n|      20     |\n|      21     |\n+-------------+\n4 rows in set (0.01 sec)\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["JOIN\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"In addition to supporting equi-join in inner join conditions, non-equi-join is also supported. However, for performance considerations, it is recommended to use equi-join."}),"\n",(0,r.jsx)(n.li,{children:"Other types of joins only support equi-join."}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},250065:function(e,n,s){s.d(n,{Z:function(){return c},a:function(){return l}});var t=s(667294);let r={},i=t.createContext(r);function l(e){let n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);