"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["497018"],{64041:function(e,s,n){n.r(s),n.d(s,{default:()=>h,frontMatter:()=>l,metadata:()=>t,assets:()=>d,toc:()=>a,contentTitle:()=>r});var t=JSON.parse('{"id":"query/query-variables/sql-mode","title":"SQL Mode","description":"\x3c!--","source":"@site/versioned_docs/version-2.0/query/query-variables/sql-mode.md","sourceDirName":"query/query-variables","slug":"/query/query-variables/sql-mode","permalink":"/docs/2.0/query/query-variables/sql-mode","draft":false,"unlisted":false,"tags":[],"version":"2.0","frontMatter":{"title":"SQL Mode","language":"en"},"sidebar":"docs","previous":{"title":"Variable","permalink":"/docs/2.0/query/query-variables/variables"},"next":{"title":"Nereids-the Brand New Planner","permalink":"/docs/2.0/query/nereids/nereids-new"}}'),o=n("785893"),i=n("250065");let l={title:"SQL Mode",language:"en"},r="SQL Mode",d={},a=[{value:"sql mode introduce",id:"sql-mode-introduce",level:2},{value:"principle",id:"principle",level:2},{value:"Operation method",id:"operation-method",level:2},{value:"mode is supported",id:"mode-is-supported",level:2},{value:"composite mode",id:"composite-mode",level:2}];function c(e){let s={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,i.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.header,{children:(0,o.jsx)(s.h1,{id:"sql-mode",children:"SQL Mode"})}),"\n",(0,o.jsx)(s.p,{children:"The sql mode newly supported by Doris refers to the sql mode management mechanism of Mysql. Each client can set its own sql mode, and database administrators with Admin privileges can set the global sql mode."}),"\n",(0,o.jsx)(s.h2,{id:"sql-mode-introduce",children:"sql mode introduce"}),"\n",(0,o.jsx)(s.p,{children:"sql mode enables users to switch between different styles of sql syntax and data validation strictness, making Doris more compatible with other databases. For example, in some databases, the '||' symbol is a string concatenator, but in Doris it is equivalent to 'or', then users only need to use sql mode to switch to the style they want. Each client can set the sql mode, which is valid in the current session. Only users with Admin privileges can set the global sql mode."}),"\n",(0,o.jsx)(s.h2,{id:"principle",children:"principle"}),"\n",(0,o.jsx)(s.p,{children:"The sql mode is stored in SessionVariables with a 64-bit Long type. Each bit of this address represents the enable/disable (1 means open, 0 means disable) state of a mode, as long as you know where each mode is. Bit, we can easily and quickly perform checksum operations on sql mode through bit operations."}),"\n",(0,o.jsx)(s.p,{children:"Every time you query the sql mode, the Long type will be parsed and turned into a user-readable string. Similarly, the sql mode string sent by the user to the server will be parsed into a string that can be stored in SessionVariables. Long type."}),"\n",(0,o.jsx)(s.p,{children:"The global sql mode that has been set will be persisted, so the operation on the global sql mode always only needs to be performed once, and the last global sql mode can be restored even after the program is restarted."}),"\n",(0,o.jsx)(s.h2,{id:"operation-method",children:"Operation method"}),"\n",(0,o.jsxs)(s.ol,{children:["\n",(0,o.jsx)(s.li,{children:"Set sql mode"}),"\n"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{children:'set global sql_mode = "DEFAULT"\nset session sql_mode = "DEFAULT"\n'})}),"\n",(0,o.jsxs)(s.blockquote,{children:["\n",(0,o.jsx)(s.p,{children:"Currently Doris's default sql mode is DEFAULT (but this will be changed in subsequent revisions soon).\nSetting global sql mode requires Admin privileges and will affect all clients connecting thereafter.\nSetting session sql mode will only affect the current dialog client, the default is session mode."}),"\n"]}),"\n",(0,o.jsxs)(s.ol,{start:"2",children:["\n",(0,o.jsx)(s.li,{children:"Query sql mode"}),"\n"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{children:"select @@global.sql_mode\nselect @@session.sql_mode\n"})}),"\n",(0,o.jsxs)(s.blockquote,{children:["\n",(0,o.jsx)(s.p,{children:"In addition to this way, you can also check the current sql mode by returning all session variables in the following way"}),"\n"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{children:"show global variables\nshow session variables\n"})}),"\n",(0,o.jsx)(s.h2,{id:"mode-is-supported",children:"mode is supported"}),"\n",(0,o.jsxs)(s.ol,{children:["\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.code,{children:"PIPES_AS_CONCAT"})}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:["In this mode, the '||' symbol is a string concatenation symbol (same as the CONCAT() function), not a synonym for the 'OR' symbol. (e.g., ",(0,o.jsx)(s.code,{children:"'a'||'b' = 'ab'"}),", ",(0,o.jsx)(s.code,{children:"1||0 = '10'"}),")"]}),"\n",(0,o.jsx)(s.h2,{id:"composite-mode",children:"composite mode"}),"\n",(0,o.jsx)(s.p,{children:"(subsequent additions)"})]})}function h(e={}){let{wrapper:s}={...(0,i.a)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},250065:function(e,s,n){n.d(s,{Z:function(){return r},a:function(){return l}});var t=n(667294);let o={},i=t.createContext(o);function l(e){let s=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),t.createElement(i.Provider,{value:s},e.children)}}}]);