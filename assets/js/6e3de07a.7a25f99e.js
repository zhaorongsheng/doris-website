"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["520213"],{29823:function(e,n,t){t.r(n),t.d(n,{default:()=>h,frontMatter:()=>r,metadata:()=>s,assets:()=>c,toc:()=>a,contentTitle:()=>l});var s=JSON.parse('{"id":"lakehouse/database/ibm-db2","title":"IBM Db2","description":"\x3c!--","source":"@site/versioned_docs/version-3.0/lakehouse/database/ibm-db2.md","sourceDirName":"lakehouse/database","slug":"/lakehouse/database/ibm-db2","permalink":"/docs/3.0/lakehouse/database/ibm-db2","draft":false,"unlisted":false,"tags":[],"version":"3.0","frontMatter":{"title":"IBM Db2","language":"en"},"sidebar":"docs","previous":{"title":"SQL Server","permalink":"/docs/3.0/lakehouse/database/sqlserver"},"next":{"title":"ClickHouse","permalink":"/docs/3.0/lakehouse/database/clickhouse"}}'),d=t("785893"),i=t("250065");let r={title:"IBM Db2",language:"en"},l=void 0,c={},a=[{value:"Terms and Conditions",id:"terms-and-conditions",level:2},{value:"Connect to IBM Db2",id:"connect-to-ibm-db2",level:2},{value:"Hierarchical mapping",id:"hierarchical-mapping",level:2},{value:"Type mapping",id:"type-mapping",level:2},{value:"IBM Db2 to Doris type mapping",id:"ibm-db2-to-doris-type-mapping",level:3},{value:"Query optimization",id:"query-optimization",level:2},{value:"Predicate pushdown",id:"predicate-pushdown",level:3},{value:"Row limit",id:"row-limit",level:3},{value:"Escape characters",id:"escape-characters",level:3},{value:"FAQ",id:"faq",level:2}];function o(e){let n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.p,{children:"Doris JDBC Catalog supports connecting to IBM Db2 databases through the standard JDBC interface. This document describes how to configure an IBM Db2 database connection."}),"\n",(0,d.jsx)(n.h2,{id:"terms-and-conditions",children:"Terms and Conditions"}),"\n",(0,d.jsx)(n.p,{children:"To connect to an IBM Db2 database, you need"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"IBM Db2 11.5.x or higher"}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:["JDBC driver for IBM Db2 database, you can download the latest or specified version of IBM Db2 driver from ",(0,d.jsx)(n.a,{href:"https://mvnrepository.com/artifact/com.ibm.db2/jcc",children:"Maven repository"}),". ",(0,d.jsx)(n.strong,{children:"It is recommended to use IBM db2 jcc version 11.5.8.0"}),"."]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"Doris Network connection between each FE and BE node and the IBM Db2 server, default port is 51000."}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"connect-to-ibm-db2",children:"Connect to IBM Db2"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-sql",children:'CREATE CATALOG db2 PROPERTIES (\n    "type"="jdbc",\n    "user"="USERNAME",\n    "password"="PASSWORD",\n    "jdbc_url" = "jdbc:db2://host:port/database",\n    "driver_url" = "jcc-11.5.8.0.jar",\n    "driver_class" = "com.ibm.db2.jcc.DB2Driver"\n)\n'})}),"\n",(0,d.jsx)(n.admonition,{title:"remarks",type:"info",children:(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"jdbc_url"})," defines the connection information and parameters to be passed to the IBM Db2 driver.\nThe parameters for the supported URLs can be found in the ",(0,d.jsx)(n.a,{href:"https://www.ibm.com/docs/en/db2-big-sql/5.0?topic=drivers-jdbc-driver",children:"Db2 JDBC Driver Documentation"}),"."]})}),"\n",(0,d.jsx)(n.h2,{id:"hierarchical-mapping",children:"Hierarchical mapping"}),"\n",(0,d.jsxs)(n.p,{children:['When mapping IBM Db2, Doris\' Database corresponds to a Schema under the specified DataBase ("database" in the ',(0,d.jsx)(n.code,{children:"jdbc_url"})," parameter) in DB2. The Table under Doris' Database corresponds to the Tables under Schema in DB2. That is, the mapping relationship is as follows:"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{style:{textAlign:"center"},children:"Doris"}),(0,d.jsx)(n.th,{style:{textAlign:"center"},children:"IBM Db2"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{style:{textAlign:"center"},children:"Catalog"}),(0,d.jsx)(n.td,{style:{textAlign:"center"},children:"DataBase"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{style:{textAlign:"center"},children:"Database"}),(0,d.jsx)(n.td,{style:{textAlign:"center"},children:"Schema"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{style:{textAlign:"center"},children:"Table"}),(0,d.jsx)(n.td,{style:{textAlign:"center"},children:"Table"})]})]})]}),"\n",(0,d.jsx)(n.h2,{id:"type-mapping",children:"Type mapping"}),"\n",(0,d.jsx)(n.h3,{id:"ibm-db2-to-doris-type-mapping",children:"IBM Db2 to Doris type mapping"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"IBM Db2 Type"}),(0,d.jsx)(n.th,{children:"Doris Type"}),(0,d.jsx)(n.th,{children:"Comment"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"SMALLINT"}),(0,d.jsx)(n.td,{children:"SMALLINT"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"INT"}),(0,d.jsx)(n.td,{children:"INT"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"BIGINT"}),(0,d.jsx)(n.td,{children:"BIGINT"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"DOUBLE"}),(0,d.jsx)(n.td,{children:"DOUBLE"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"DOUBLE PRECISION"}),(0,d.jsx)(n.td,{children:"DOUBLE"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"FLOAT"}),(0,d.jsx)(n.td,{children:"DOUBLE"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"REAL"}),(0,d.jsx)(n.td,{children:"FLOAT"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"NUMERIC"}),(0,d.jsx)(n.td,{children:"DECIMAL"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"DECIMAL"}),(0,d.jsx)(n.td,{children:"DECIMAL"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"DECFLOAT"}),(0,d.jsx)(n.td,{children:"DECIMAL"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"DATE"}),(0,d.jsx)(n.td,{children:"DATE"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"TIMESTAMP"}),(0,d.jsx)(n.td,{children:"DATETIME"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"CHAR"}),(0,d.jsx)(n.td,{children:"CHAR"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"CHAR VARYING"}),(0,d.jsx)(n.td,{children:"VARCHAR"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"VARCHAR"}),(0,d.jsx)(n.td,{children:"VARCHAR"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"LONG VARCHAR"}),(0,d.jsx)(n.td,{children:"VARCHAR"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"VARGRAPHIC"}),(0,d.jsx)(n.td,{children:"STRING"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"LONG VARGRAPHIC"}),(0,d.jsx)(n.td,{children:"STRING"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"TIME"}),(0,d.jsx)(n.td,{children:"STRING"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"CLOB"}),(0,d.jsx)(n.td,{children:"STRING"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"XML"}),(0,d.jsx)(n.td,{children:"STRING"}),(0,d.jsx)(n.td,{})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"OTHER"}),(0,d.jsx)(n.td,{children:"UNSUPPORTED"}),(0,d.jsx)(n.td,{})]})]})]}),"\n",(0,d.jsx)(n.h2,{id:"query-optimization",children:"Query optimization"}),"\n",(0,d.jsx)(n.h3,{id:"predicate-pushdown",children:"Predicate pushdown"}),"\n",(0,d.jsxs)(n.p,{children:["When executing a query like ",(0,d.jsx)(n.code,{children:"where dt = '2022-01-01'"}),", Doris can push these filtering conditions down to the external data source, thereby directly excluding data that does not meet the conditions at the data source level, reducing inaccuracies. Necessary data acquisition and transmission. This greatly improves query performance while also reducing the load on external data sources."]}),"\n",(0,d.jsx)(n.h3,{id:"row-limit",children:"Row limit"}),"\n",(0,d.jsx)(n.p,{children:"If you include the limit keyword in the query, Doris will push the limit down to the IBM Db2 database to reduce the amount of data transfer."}),"\n",(0,d.jsx)(n.h3,{id:"escape-characters",children:"Escape characters"}),"\n",(0,d.jsx)(n.p,{children:'Doris will automatically add the escape character ("") to the field names and table names in the query statements sent to IBM Db2 to prevent field names and table names from conflicting with IBM Db2 internal keywords.'}),"\n",(0,d.jsx)(n.h2,{id:"faq",children:"FAQ"}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"Invalid operation: result set is closed. ERRORCODE=-4470"})," exception occurs when reading IBM Db2 data through JDBC Catalog"]}),"\n",(0,d.jsxs)(n.p,{children:["Add connection parameters in the jdbc_url connection string when creating the IBM Db2 Catalog: ",(0,d.jsx)(n.code,{children:"allowNextOnExhaustedResultSet=1;resultSetHoldability=1;"}),". like:\n",(0,d.jsx)(n.code,{children:"jdbc:db2://host:port/database:allowNextOnExhaustedResultSet=1;resultSetHoldability=1;"}),"."]}),"\n"]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(o,{...e})}):o(e)}},250065:function(e,n,t){t.d(n,{Z:function(){return l},a:function(){return r}});var s=t(667294);let d={},i=s.createContext(d);function r(e){let n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);